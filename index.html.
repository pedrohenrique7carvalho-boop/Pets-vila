<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêæ Pets Villa - Ganhe at√© 20% OFF</title>
    <style>
        /* (Todo o CSS fornecido no prompt est√° aqui, sem altera√ß√µes) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* ...[restante do CSS, igual ao prompt, omitido aqui para brevidade]... */
        /* Inclua todo o CSS fornecido no seu prompt aqui, sem altera√ß√µes */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-3d">üêï</div>
            <h1>PETS VILLA</h1>
            <p class="subtitle">Ganhe at√© 20% de desconto!</p>
        </div>

        <div class="instructions">
            <h3>üéÆ Como Jogar:</h3>
            <ul>
                <li>Clique em "COME√áAR" para iniciar</li>
                <li>O cachorro com osso vai correr rapidamente</li>
                <li>Clique em "PARAR" quando ele estiver sobre a sombra</li>
                <li>Quanto mais preciso, maior o desconto!</li>
            </ul>
        </div>

        <div class="highlight-box">
            üí∞ Promo√ß√£o Especial: At√© 20% OFF na primeira compra!
        </div>

        <div class="game-arena">
            <div class="track">
                <!-- Zona alvo com sombra -->
                <div class="target-zone">
                    <span class="target-label">Alvo</span>
                </div>
                <div class="dog-shadow">
                    <span class="shadow-emoji">üêï</span>
                </div>
                
                <!-- Cachorro em movimento com osso -->
                <div class="moving-element" id="movingDog">
                    <div class="dog-container">
                        <div class="dog-with-bone">
                            <span class="dog-emoji">üêï</span>
                            <span class="bone-emoji">ü¶¥</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn-start" id="startBtn">
            üöÄ COME√áAR
        </button>

        <button class="btn-start btn-stop" id="stopBtn" style="display:none;">
            üõë PARAR AGORA!
        </button>
    </div>

    <!-- MODAL OVERLAY COM POPUP -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="result-popup">
            <div class="stars">
                <span class="star" style="top:10%; left:10%; font-size:20px;">‚ú®</span>
                <span class="star" style="top:15%; right:15%; font-size:15px; animation-delay:0.5s;">‚≠ê</span>
                <span class="star" style="bottom:20%; left:20%; font-size:18px; animation-delay:1s;">‚ú®</span>
                <span class="star" style="bottom:15%; right:10%; font-size:22px; animation-delay:1.5s;">‚≠ê</span>
            </div>
            
            <div class="result-header">
                <div class="success-emoji">üéâ</div>
                <div class="success-badge">PARAB√âNS!</div>
            </div>
            
            <div class="discount-amount" id="discountAmount">0% OFF</div>
            <div class="precision-text" id="precisionText"></div>
            
            <div class="coupon-box">
                <div class="coupon-label">Seu Cupom Exclusivo</div>
                <div class="coupon-code" id="couponCode">PETS00</div>
            </div>
            
            <div class="action-buttons">
                <a href="#" class="whatsapp-btn" id="whatsappBtn" target="_blank">
                    <span>üì≤</span>
                    <span>RESGATAR</span>
                </a>
                <button class="retry-btn" id="retryBtn">
                    <span>üîÑ JOGAR</span>
                </button>
            </div>
            
            <p class="phone-number">üìû +55 11 93094-0342</p>
        </div>
    </div>

    <script>
        let position = 0;
        let speed = 4; // Sempre r√°pido!
        let direction = 1;
        let animationId = null;
        let isMoving = false;

        const movingDog = document.getElementById('movingDog');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const modalOverlay = document.getElementById('modalOverlay');
        const retryBtn = document.getElementById('retryBtn');
        const discountAmount = document.getElementById('discountAmount');
        const couponCode = document.getElementById('couponCode');
        const whatsappBtn = document.getElementById('whatsappBtn');
        const precisionText = document.getElementById('precisionText');

        // Cria part√≠culas de fundo
        function createBackgroundParticles() {
            const particles = ['üêæ', 'ü¶¥', '‚ù§Ô∏è'];
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.innerHTML = particles[Math.floor(Math.random() * particles.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.fontSize = (15 + Math.random() * 15) + 'px';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                document.body.appendChild(particle);
            }
        }

        // Calcula largura do jogo
        const containerWidth = Math.min(480, window.innerWidth - 40);
        const gameWidth = containerWidth * 0.8;
        const dogWidth = 60;
        const maxPosition = gameWidth - dogWidth;

        function updateDogPosition() {
            if (!isMoving) return;

            position += speed * direction;

            if (position >= maxPosition) {
                position = maxPosition;
                direction = -1;
            } else if (position <= 0) {
                position = 0;
                direction = 1;
            }

            movingDog.style.left = position + 'px';
            animationId = requestAnimationFrame(updateDogPosition);
        }

        function startGame() {
            isMoving = true;
            position = 0;
            direction = 1;
            speed = 4; // Sempre velocidade r√°pida
            
            modalOverlay.classList.remove('show');
            startBtn.style.display = 'none';
            stopBtn.style.display = 'block';
            
            updateDogPosition();
        }

        function stopGame() {
            if (!isMoving) return;

            isMoving = false;
            cancelAnimationFrame(animationId);
            
            stopBtn.style.display = 'none';
            
            // Calcula a dist√¢ncia do centro com l√≥gica precisa
            const center = maxPosition / 2;
            const distance = Math.abs(position - center);
            const maxDistance = center;
            const precision = Math.max(0, 100 - (distance / maxDistance * 100));
            
            // L√≥gica de desconto baseada na precis√£o REAL
            let discount = 0;
            let message = '';
            
            if (precision >= 98) {
                discount = 20;
                message = 'üéØ PERFEITO! Precis√£o m√°xima!';
                createSuperConfetti();
            } else if (precision >= 90) {
                discount = 15;
                message = 'üåü Excelente! Muito pr√≥ximo!';
                createConfetti();
            } else if (precision >= 75) {
                discount = 10;
                message = '‚ú® Muito bom! √ìtima precis√£o!';
                createConfetti();
            } else if (precision >= 60) {
                discount = 7;
                message = 'üëç Bom trabalho!';
            } else if (precision >= 40) {
                discount = 5;
                message = 'üòä Legal! Ganhou desconto!';
            } else {
                discount = 3;
                message = 'üéÆ Tente novamente para mais!';
            }

            precisionText.textContent = message;
            
            // Atualiza resultado
            discountAmount.textContent = `${discount}% OFF`;
            const code = `PETS${discount}${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`;
            couponCode.textContent = code;
            
            // WhatsApp - mensagem simples sem mencionar servi√ßo espec√≠fico
            const whatsappMessage = `üêæ Ol√°! Ganhei ${discount}% de desconto no jogo Pets Villa! Meu cupom √©: ${code}`;
            const whatsappUrl = `https://wa.me/5511930940342?text=${encodeURIComponent(whatsappMessage)}`;
            whatsappBtn.href = whatsappUrl;
            
            // Mostra o popup
            setTimeout(() => {
                modalOverlay.classList.add('show');
            }, 300);
        }

        function createConfetti() {
            const colors = ['#FF6B35', '#F7931E', '#4CAF50', '#2196F3', '#E91E63'];
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti-piece';
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const size = Math.random() * 10 + 10;
                    
                    confetti.style.width = size + 'px';
                    confetti.style.height = size + 'px';
                    confetti.style.background = color;
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-20px';
                    
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function createSuperConfetti() {
            createConfetti();
            
            // Emojis especiais para desconto m√°ximo
            const specialEmojis = ['üèÜ', '‚≠ê', 'üíñ', 'üéØ', 'üíé', 'üåü'];
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'confetti-piece';
                    emoji.innerHTML = specialEmojis[Math.floor(Math.random() * specialEmojis.length)];
                    emoji.style.fontSize = '30px';
                    emoji.style.left = Math.random() * 100 + '%';
                    document.body.appendChild(emoji);
                    setTimeout(() => emoji.remove(), 3000);
                }, i * 60);
            }
        }

        // Event listeners
        startBtn.addEventListener('click', startGame);
        stopBtn.addEventListener('click', stopGame);
        retryBtn.addEventListener('click', () => {
            modalOverlay.classList.remove('show');
            startBtn.style.display = 'block';
        });

        // Fecha modal ao clicar fora (opcional)
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('show');
                startBtn.style.display = 'block';
            }
        });

        // Inicializa
        createBackgroundParticles();

        // Previne scroll mobile durante o jogo
        document.addEventListener('touchmove', function(e) {
            if (isMoving) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
